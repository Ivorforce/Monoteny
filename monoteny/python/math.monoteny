def sin#math(x 'FloatX<64>) -> FloatX<64>;

def sin#math_iso(x '$Iso<FloatX<64>>) -> $Iso :: sin#math(x.convert).convert;

-- def optimize!(sin) :: {
--     if x == FloatX<64> :: return sin#math;
--     else if x is Iso<FloatX<64>> :: return sin#math_iso;
--     else :: return sin;
-- };

def optimize!(sin) :: [sin#math, sin#math_iso]@.first($0.with(x)).or(sin);
